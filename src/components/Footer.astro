---

import * as fs from "node:fs";
import path from "node:path";
import { Icon } from "astro-icon/components";
import { footerConfig, profileConfig } from "../config";
import { navigateToPage } from "../utils/navigation-utils";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();

// 读取FooterConfig.html文件内容
let customFooterHtml = "";
if (footerConfig.enable) {
	try {
		const footerConfigPath = path.join(
			process.cwd(),
			"src",
			"FooterConfig.html",
		);
		customFooterHtml = fs.readFileSync(footerConfigPath, "utf-8");
		// 移除HTML注释
		customFooterHtml = customFooterHtml.replace(/<!--[\s\S]*?-->/g, "").trim();
	} catch (error) {
		console.warn("FooterConfig.html文件读取失败:", error.message);
	}
}
---

<!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">-->
<div class="mt-10 border-t border-black/10 dark:border-white/10 bg-[var(--card-bg)] text-sm font-mono">
    <div class="max-w-[var(--page-width)] mx-auto px-4 py-2 flex flex-col md:flex-row items-center justify-between text-50">
        <div class="flex items-center gap-2">
            {customFooterHtml && (
                <>
                    <div set:html={customFooterHtml}></div>
                    <span class="hidden md:inline text-black/20 dark:text-white/20">|</span>
                </>
            )}
            <span>&copy; {currentYear} {profileConfig.name}</span>
            <span class="hidden md:inline text-black/20 dark:text-white/20">|</span>
            <span class="flex items-center gap-1">
                <Icon name="fa6-solid:code-branch" class="text-xs" />
                <span>main</span>
            </span>
        </div>
        <div class="flex items-center gap-4 mt-2 md:mt-0">
            <span class="hidden md:flex items-center gap-2 text-xs">
                <span>utf-8</span>
                <span class="text-black/20 dark:text-white/20">|</span>
                <span>astro</span>
                <span class="text-black/20 dark:text-white/20">|</span>
                <span>credits:</span>
                <a href="https://github.com/LTX-GOD" target="_blank" rel="noopener noreferrer" class="hover:text-[var(--primary)] transition uppercase">zsh [LTX-GOD]</a>
            </span>
            <span class="hidden md:inline text-black/20 dark:text-white/20">|</span>
            <a class="hover:text-[var(--primary)] transition" href={url('rss/')} onclick={`event.preventDefault(); navigateToPage('${url('rss/')}')`}>RSS</a>
            <a class="hover:text-[var(--primary)] transition" href={url('atom/')} onclick={`event.preventDefault(); navigateToPage('${url('atom/')}')`}>Atom</a>
            <a class="hover:text-[var(--primary)] transition" target="_blank" href={url('sitemap-index.xml')}>Sitemap</a>
        </div>
    </div>
</div>
